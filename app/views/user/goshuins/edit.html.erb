<%= javascript_pack_tag 'goshuin' %>

<div class="container o-8column">
  <div class="row">
    <div class="col-md-4">
      <%= render 'layouts/a_side' %>
    </div>
    <div class="col-md-7 offset-lg-1">
      <h1>御朱印投稿</h1>
      <%= form_with model: @goshuin do |f| %>
        <div class="form-group">
          <div class="w-50">
            <% if @goshuin.image.attached? %>
              <%= image_tag @goshuin.image, style: "max-width: 200px;", id: 'imagePreview', class: "img-fluid mb-3" %>
            <% else %>
              <%= image_tag "gosyuin_no_image", id: 'imagePreview', class: "img-fluid mb-3" %>
            <% end %>
          </div>
          <%= f.file_field :image, id: "imageField" %>

          <%= f.hidden_field :user_id, value: current_user.id %>

          <div class="form-group mt-3">
            <%= f.collection_radio_buttons :category, Place.categories_i18n, :first, :last do |b| %>
              <%= b.label(class: "mr-2") { b.radio_button(class: "mr-1") + b.text } %>
            <% end %>
          </div>

          <div class="form-group" id="zinzya">
            <%= f.label :place, "寺社名<font color='red'>*必須</font>".html_safe %>
            <%= f.select :place_id, @places_data[:jinja].map { |place| [place.name, place.id] }, prompt: "選択してください", class: "form-control" %>
          </div>

          <div class="form-group" id="otera">
            <%= f.label :place, "寺社名<font color='red'>*必須</font>".html_safe %>
            <%= f.select :place_id, @places_data[:otera].map { |place| [place.name, place.id] }, prompt: "選択してください", class: "form-control" %>
          </div>

          <div class="form-group">
            <%= f.label :visit_day, "参拝日" %>
            <%= f.date_field :visit_day, class: "form-control" %>
          </div>

          <div class="form-group">
            <%= f.label :price, "心付け" %>
            <%= f.text_field :price, placeholder: "心付け", class: "form-control" %>
          </div>

          <div class="form-group">
            <%= f.label :message, "めっせぇじ" %>
            <%= f.text_area :message, placeholder: "ご自由にどうぞ", class: "form-control" %>
          </div>

          <%= f.submit "とうこう", class: "btn btn-primary" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
