<%= javascript_pack_tag 'goshuin' %>

<div class="container o-8column">
  <!--行を示す要素で、内部のコンテンツを行内に配置-->
  <div class="row">
    <!-- 左側のコラム (幅: 5カラム) -->
    <div class="col-md-4">
      <!-- 'layouts/a_side' テンプレートを描画してサイドバーを表示 -->
      <%= render 'layouts/a_side', q: @q %>
    </div>
    <!-- 右側のコラム (幅: 7カラム) -->
    <div class="col-md-7 offset-lg-1">
      <h1>御朱印投稿</h1>
      <%= form_with model: @goshuin do |f| %>
        <!--バリデーションの部分テンプレート呼び出し-->
        <%= render "layouts/error_messages", model: f.object %>

        <div class="form-group">
          <!--画像サイズのブートストラップ-->
          <div class="w-50">
            <% if @goshuin.image.attached? %>
              <%= image_tag goshuin.image, style: "max-width: 200px;", id: 'imagePreview', class: "img-fluid mb-3" %>
            <% else %>
              <%= image_tag "gosyuin_no_image", id: 'imagePreview', class: "img-fluid mb-3" %>
            <% end %>
          </div>
          <%= f.file_field :image, id: "imageField" %>

          <%= f.hidden_field :user_id, value: current_user.id %>

           <div class="form-group mt-3">
            <%= f.collection_radio_buttons :category, Place.categories_i18n, :first, :last do |b| %>
              <%= b.label(class: "mr-2") { b.radio_button(class: "mr-1") + b.text } %>
            <% end %>
          </div>

          <div class="form-group" id="zinzya"><!-- JavaScriptで能動的なセレクトボックスを作成する為にID設定 -->
            <%= f.label :place, "寺社名<font color='red'>*必須</font>".html_safe %>
            <%= f.select :place_id, @jinja.map { |place| [place.name, place.id] }, { prompt: "選択してください" }, { class: "form-control" } %>
            <%#= select_tag "place_id", options_for_select(@jinja.map { |place| [place.name, place.id] }, selected: f.object.place_id), prompt: "選択してください", class: "form-control" %>
          </div>

          <div class="form-group" id="otera"><!-- JavaScriptで能動的なセレクトボックスを作成する為にID設定 -->
            <%= f.label :place2, "寺社名<font color='red'>*必須</font>".html_safe %>
            <%#= f.select :place_id2, @otera.map { |place| [place.name, place.id] }, { prompt: "選択してください" }, { class: "form-control" } %>
            <%= select_tag :place_id2, options_for_select(@otera.map { |place| [place.name, place.id] }, selected: params[:place_id2]), prompt: "選択してください", class: "form-control" %>
          </div>

          <div class="form-group">
            <%= f.label :参拝日 %>
            <%= f.date_field :visit_day, class: "form-control" %>
          </div>

          <div class="form-group">
            <%= f.label :心付け %>
            <%= f.text_field :price, placeholder: "心付け", class: "form-control" %>
          </div>

          <div class="form-group">
            <%= f.label :めっせぇじ %>
            <%= f.text_area :message, placeholder: "ご自由にどうぞ", class: "form-control" %>
          </div>

          <!--送信フォームここで名前はつけられていないので、表示したいViewの部分テンプレート呼び出し後に記述する-->
          <%= f.submit :とうこう, class: "btn btn-primary" %>
        <% end %>
      </div>
    </div>
  </div>
</div>